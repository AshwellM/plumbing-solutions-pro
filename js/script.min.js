let hamburger=document.querySelector(".hamburger"),navMenu=document.querySelector(".nav-menu"),quoteForm=document.getElementById("quote-form"),contactForm=document.getElementById("contact-form"),result=document.getElementById("result")||Object.assign(document.createElement("div"),{id:"result",style:"display:none"});hamburger?.addEventListener("click",()=>{hamburger.classList.toggle("active");navMenu.classList.toggle("active")});document.querySelectorAll(".nav-link").forEach(e=>e.addEventListener("click",()=>{hamburger?.classList.remove("active");navMenu?.classList.remove("active")}));document.querySelectorAll('a[href^="#"]').forEach(a=>a.addEventListener("click",e=>{e.preventDefault();const t=document.querySelector(a.getAttribute("href"));if(t){const o=(document.querySelector(".header")?.offsetHeight||0);window.scrollTo({top:t.offsetTop-o,behavior:"smooth"})}}));window.addEventListener("scroll",()=>{const e=document.querySelector(".header");if(!e)return;e.style.background=window.scrollY>100?"rgba(255,255,255,0.98)":"rgba(255,255,255,0.95)"});function attachFormHandler(e,t,o){if(!e)return;e.addEventListener("submit",n=>{n.preventDefault();if(!validateForm(e))return alert("Please correct the highlighted fields.");const r=new FormData(e),s=JSON.stringify(Object.fromEntries(r)),a=e.querySelector('button[type="submit"]'),c=a.textContent;a.textContent="Sendingâ€¦";a.disabled=true;fetch("https://api.web3forms.com/submit",{method:"POST",headers:{"Content-Type":"application/json","Accept":"application/json"},body:s}).then(l=>l.json()).then(l=>{if(l.success){alert(t);if(o)window.location.href=o}else{alert(l.message||"Submission failed.")}}).catch(l=>{console.error(l);alert("Network error. Please try again.")}).finally(()=>{e.reset();a.textContent=c;a.disabled=false})})}attachFormHandler(quoteForm,"Thank you for your quote request! We will contact you within 1 hour.","thank-you.html");attachFormHandler(contactForm,"Thank you for your message! We will get back to you within 24 hours.","thank-you.html");const observerOptions={threshold:.1,rootMargin:"0px 0px -50px 0px"},io=new IntersectionObserver(e=>{e.forEach(({target:e,isIntersecting:t})=>{t&&(e.style.opacity="1",e.style.transform="translateY(0)",io.unobserve(e))})},observerOptions);document.querySelectorAll(".service-card,.feature-item,.contact-item,.area-item").forEach(e=>{e.style.cssText="opacity:0;transform:translateY(30px);transition:opacity .6s ease,transform .6s ease";io.observe(e)});function formatPhoneNumber(e){let t=e.value.replace(/\D/g,"");if(t.length>=3){if(t.startsWith("0"))t=t.replace(/(\d{3})(\d{3})(\d{4})/,"$1 $2 $3");else if(t.startsWith("27"))t=t.replace(/(\d{2})(\d{2})(\d{3})(\d{4})/,"+$1 $2 $3 $4")}e.value=t}function validateForm(e){let t=true;e.querySelectorAll("[required]").forEach(o=>{o.value.trim()?o.style.borderColor="#e5e7eb":(o.style.borderColor="#dc2626",t=false)});e.querySelectorAll('input[type="email"]').forEach(o=>{const n=o.value;if(n&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)){o.style.borderColor="#dc2626";t=false}});return t}document.querySelectorAll('input[type="tel"]').forEach(e=>e.addEventListener("input",()=>formatPhoneNumber(e)));if("IntersectionObserver"in window){const ioImg=new IntersectionObserver(entries=>{entries.forEach(({target:e,isIntersecting:t})=>{t&&(e.src=e.dataset.src||e.src,e.classList.remove("lazy"),ioImg.unobserve(e))})});document.querySelectorAll('img[loading="lazy"]').forEach(e=>ioImg.observe(e))}let backBtn=document.createElement("button");backBtn.innerHTML='<i class="fas fa-arrow-up"></i>';backBtn.className="back-to-top";backBtn.style.cssText="position:fixed;bottom:20px;right:20px;width:50px;height:50px;background:#dc2626;color:#fff;border:none;border-radius:50%;cursor:pointer;opacity:0;visibility:hidden;transition:all .3s ease;z-index:1000;box-shadow:0 4px 15px rgba(220,38,38,.3)";document.body.appendChild(backBtn);window.addEventListener("scroll",()=>{backBtn.style.opacity=window.scrollY>500?"1":"0";backBtn.style.visibility=window.scrollY>500?"visible":"hidden"});backBtn.addEventListener("click",()=>window.scrollTo({top:0,behavior:"smooth"}));const style=document.createElement("style");style.textContent=`@keyframes ripple{to{transform:scale(4);opacity:0}}.nav-menu.active{display:flex;flex-direction:column;position:absolute;top:100%;left:0;right:0;background:#fff;box-shadow:0 5px 15px rgba(0,0,0,.1);padding:1rem;gap:1rem}.hamburger.active span:nth-child(1){transform:rotate(45deg) translate(5px,5px)}.hamburger.active span:nth-child(2){opacity:0}.hamburger.active span:nth-child(3){transform:rotate(-45deg) translate(7px,-6px)}@media(max-width:768px){.nav-menu,.nav-contact{display:none}}`;document.head.appendChild(style);document.addEventListener("DOMContentLoaded",()=>{console.log("Plumbing Solutions Pro loaded");const e=document.querySelector(".hero-content");if(e){e.style.cssText="opacity:0;transform:translateY(50px)";setTimeout(()=>{e.style.transition="opacity 1s ease,transform 1s ease";e.style.opacity="1";e.style.transform="translateY(0)"},300)}});